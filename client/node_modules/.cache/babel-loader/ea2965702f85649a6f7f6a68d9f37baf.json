{"ast":null,"code":"import _classCallCheck from \"/Users/flatironschool/flatironschool/Campus/module4/project/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flatironschool/flatironschool/Campus/module4/project/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/flatironschool/flatironschool/Campus/module4/project/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/flatironschool/flatironschool/Campus/module4/project/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/flatironschool/flatironschool/Campus/module4/project/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/flatironschool/flatironschool/Campus/module4/project/client/src/component/PersonalPage/PersonalPage.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport { Route, Link, Switch } from 'react-router-dom';\nimport API from '../API';\nimport MediaCard from './MediaCard';\nimport Graphs1 from './Graphs1';\nimport Graphs2 from './Graphs2';\nimport Graphs3 from './Graphs3';\nimport PersonalPageCss from './PersonalPage.css';\nimport ReactVirtualizedTable from './ReactVirtualizedTable';\n\nvar styles = function styles(theme) {\n  return {\n    button: {\n      margin: theme.spacing.unit\n    },\n    input: {\n      display: 'none'\n    }\n  };\n};\n\nvar PersonalPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(PersonalPage, _React$Component);\n\n  function PersonalPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PersonalPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PersonalPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      coins: [],\n      news: [],\n      coins_current_values: [],\n      last_access: '',\n      created: '',\n      total: [],\n      breakevenpoint: 0,\n      single_coin_graph: [],\n      showing: 'Total'\n    };\n\n    _this.breakevenpoint = function () {\n      var breakevenpoint = 0;\n\n      _this.state.coins.map(function (coin) {\n        breakevenpoint += coin.amount * coin.price_per_unit;\n      });\n\n      _this.setState({\n        breakevenpoint: breakevenpoint\n      });\n    };\n\n    _this.get30DaysDetail = function (name) {\n      var selectedCoin = _this.state.coins.filter(function (x) {\n        return x.coin == name.toLowerCase();\n      })[0];\n\n      API.last30days(selectedCoin).then(function (total) {\n        var breakevenpoint = selectedCoin.amount * selectedCoin.price_per_unit;\n        var graph = [['Day', \"\".concat(name, \" Total\"), 'Break-even-point']];\n\n        for (var i = 0; i < total.length; i++) {\n          var day = new Date();\n          day.setDate(day.getDate() - total.length);\n          day.setDate(day.getDate() + i);\n          var selectedDay = API.changeDataFormatfromDateToEU(day);\n          graph.push([selectedDay, Number(total[i]), Number(breakevenpoint)]);\n        }\n\n        _this.setState({\n          total: graph,\n          showing: name\n        });\n      });\n    };\n\n    _this.getHistory = function () {\n      var now = new Date();\n      var today = \"\".concat((\"0\" + now.getDate()).slice(-2), \"-\").concat((\"0\" + (now.getMonth() + 1)).slice(-2), \"-\").concat(now.getFullYear());\n      API.getCoinsCurrentValue(_this.state.coins.map(function (coin) {\n        return coin.coin;\n      })).then(function (prices) {\n        return _this.setState({\n          coins_current_values: prices\n        });\n      });\n\n      if (today === _this.state.created) {\n        API.firstCoinHistory(_this.state).then(function (total) {\n          var breakevenpoint = 0;\n\n          _this.state.coins.map(function (coin) {\n            breakevenpoint += coin.amount * coin.price_per_unit;\n          });\n\n          var values = [today, Number(total[0]), Number(breakevenpoint)];\n          var oldValues = _this.state.total;\n          var newValues = oldValues.slice(0, 1);\n          newValues.push(values);\n\n          _this.setState({\n            total: newValues\n          });\n\n          API.updateTotal(newValues);\n        });\n      } else if (today === _this.state.last_access) {} else {\n        var oldState = _this.state.total;\n        var newState;\n        var timeDiff = Math.abs(new Date(_this.changeDateFormatToUs(today)).getTime() - new Date(_this.changeDateFormatToUs(_this.state.last_access)).getTime());\n        var diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));\n        var breakevenpoint = 0;\n\n        _this.state.coins.map(function (coin) {\n          breakevenpoint += coin.amount * coin.price_per_unit;\n        });\n\n        API.getAllCoinsHistory(_this.state, diffDays).then(function (total) {\n          var graphArray = [];\n\n          for (var i = 0; i < total.length; i += _this.state.coins.length) {\n            var dailyTotal = 0;\n            var selectedDay = void 0;\n\n            for (var j = 0; j < _this.state.coins.length; j++) {\n              var day = new Date(API.changeDateFormatToUS(_this.state.last_access));\n              day.setDate(day.getDate() + (1 + Math.floor(i / _this.state.coins.length)));\n              selectedDay = API.changeDataFormatfromDateToEU(day);\n              dailyTotal += total[i + j];\n            }\n\n            graphArray.push([selectedDay, Number(dailyTotal), Number(breakevenpoint)]);\n          }\n\n          newState = oldState.concat(graphArray);\n\n          _this.setState({\n            total: newState\n          });\n\n          API.updateTotal(newState, _this.props.username);\n        });\n      }\n    };\n\n    _this.showTotal = function () {\n      API.getTotal2().then(function (total) {\n        _this.setState({\n          total: total.total\n        }, console.log(_this.state.total));\n      });\n    };\n\n    _this.changeDateFormatToUs = function (string) {\n      return \"\".concat(string.slice(3, 5), \"/\").concat(string.slice(0, 2), \"/\").concat(string.slice(6));\n    };\n\n    _this.changeDataFormatfromDateToEU = function (date) {\n      return \"\".concat((\"0\" + date.getDate()).slice(-2), \"-\").concat((\"0\" + (date.getMonth() + 1)).slice(-2), \"-\").concat(date.getFullYear());\n    };\n\n    _this.stateCoin = function () {\n      API.getCoins().then(function (resp) {\n        return _this.setState({\n          coins: resp.coins,\n          last_access: resp.last_access,\n          total: resp.total,\n          created: resp.created\n        }, function () {\n          _this.breakevenpoint();\n\n          _this.getHistory();\n        });\n      });\n    };\n\n    _this.stateNews = function () {\n      API.handleNews().then(function (news) {\n        _this.setState({\n          news: news.articles\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(PersonalPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.props.username) {\n        this.props.history.push('/');\n      }\n\n      this.stateCoin();\n      this.stateNews();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"PersonalPage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"NavigationBar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ButtonArea buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        onClick: function onClick() {\n          _this2.props.signout();\n        },\n        href: \"#\",\n        className: \"btn btn-sm animated-button victoria-two nav_btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Sign Out\"), React.createElement(Link, {\n        to: \"/edit\",\n        onClick: function onClick() {\n          _this2.props.coins(_this2.state.coins);\n        },\n        className: \"btn btn-sm animated-button victoria-two nav_btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"Edit Coins\"), React.createElement(Link, {\n        className: \"btn btn-sm animated-button victoria-two nav_btn\",\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Create Bot\")), React.createElement(\"div\", {\n        className: \"LogoArea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Welcome \", \"\".concat(this.props.username)))), React.createElement(\"div\", {\n        className: \"ContentPersonalPage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"LeftAreaContent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ChartBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(ReactVirtualizedTable, {\n        graph: this.get30DaysDetail,\n        showTotal: this.showTotal,\n        total: this.state.total,\n        state: this.state,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"ChartBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"Notes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"RightAreaContent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ChartBlock Chart1-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"Chart1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(Graphs1, {\n        coins: this.state.coins,\n        prices: this.state.coins_current_values,\n        state: this.state,\n        total: this.state.total,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"Chart2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Graphs2, {\n        coins: this.state.coins,\n        prices: this.state.coins_current_values,\n        state: this.state,\n        total: this.state.total,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"ChartBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"Chart3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(Graphs3, {\n        coins: this.state.coins,\n        prices: this.state.coins_current_values,\n        state: this.state,\n        total: this.state.total,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        className: \"NewsArea grid-5 center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, this.state.news.slice(0, 5).map(function (singlenews) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }, \" \", React.createElement(MediaCard, {\n          singlenews: singlenews,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }));\n      })));\n    }\n  }]);\n\n  return PersonalPage;\n}(React.Component);\n\nexport default PersonalPage;","map":{"version":3,"sources":["/Users/flatironschool/flatironschool/Campus/module4/project/client/src/component/PersonalPage/PersonalPage.js"],"names":["React","PropTypes","withStyles","Button","Route","Link","Switch","API","MediaCard","Graphs1","Graphs2","Graphs3","PersonalPageCss","ReactVirtualizedTable","styles","theme","button","margin","spacing","unit","input","display","PersonalPage","state","coins","news","coins_current_values","last_access","created","total","breakevenpoint","single_coin_graph","showing","map","coin","amount","price_per_unit","setState","get30DaysDetail","name","selectedCoin","filter","x","toLowerCase","last30days","then","graph","i","length","day","Date","setDate","getDate","selectedDay","changeDataFormatfromDateToEU","push","Number","getHistory","now","today","slice","getMonth","getFullYear","getCoinsCurrentValue","prices","firstCoinHistory","values","oldValues","newValues","updateTotal","oldState","newState","timeDiff","Math","abs","changeDateFormatToUs","getTime","diffDays","ceil","getAllCoinsHistory","graphArray","dailyTotal","j","changeDateFormatToUS","floor","concat","props","username","showTotal","getTotal2","console","log","string","date","stateCoin","getCoins","resp","stateNews","handleNews","articles","history","signout","singlenews","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport { Route, Link, Switch } from 'react-router-dom'\nimport API from '../API'\nimport MediaCard from './MediaCard'\nimport Graphs1 from './Graphs1'\nimport Graphs2 from './Graphs2'\nimport Graphs3 from './Graphs3'\nimport PersonalPageCss from './PersonalPage.css'\n\nimport ReactVirtualizedTable from './ReactVirtualizedTable'\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing.unit,\n  },\n  input: {\n    display: 'none',\n  },\n})\n\nclass PersonalPage extends React.Component{\n\n  state={\n    coins: [],\n    news: [],\n    coins_current_values: [],\n    last_access: '',\n    created: '',\n    total: [],\n    breakevenpoint: 0,\n    single_coin_graph: [],\n    showing: 'Total'\n  }\n\n  componentDidMount () {\n    if(!this.props.username){\n      this.props.history.push('/')\n    }\n     this.stateCoin()\n     this.stateNews()\n  }\n\n  breakevenpoint = ()=>{\n    let breakevenpoint=0\n    this.state.coins.map(coin=>{\n      breakevenpoint+=coin.amount*coin.price_per_unit\n    })\n    this.setState({\n      breakevenpoint: breakevenpoint\n    })\n  }\n  get30DaysDetail = (name)=>{\n    let selectedCoin= this.state.coins.filter(x=>x.coin==name.toLowerCase())[0]\n    API.last30days(selectedCoin)\n    .then(total=>{\n      let breakevenpoint= selectedCoin.amount*selectedCoin.price_per_unit\n      let graph=[['Day',`${name} Total`,'Break-even-point']]\n      for (let i = 0; i < total.length; i++){\n      let day= new Date()\n      day.setDate(day.getDate() - total.length)\n      day.setDate(day.getDate() + i)\n      let selectedDay = API.changeDataFormatfromDateToEU(day)\n      graph.push([selectedDay, Number(total[i]), Number(breakevenpoint)])\n    }\n    this.setState({\n      total: graph,\n      showing: name\n    })\n  })\n  }\n  getHistory = () =>{\n    let now =new Date\n    let today= `${(\"0\" + now.getDate()).slice(-2)}-${(\"0\" + (now.getMonth() + 1)).slice(-2)}-${now.getFullYear()}`\n    API.getCoinsCurrentValue(this.state.coins.map(coin=>coin.coin))\n    .then(prices=>this.setState({\n      coins_current_values: prices\n    }))\n    if (today===this.state.created){\n      API.firstCoinHistory(this.state)\n      .then((total)=>{\n        let breakevenpoint =0\n        this.state.coins.map(coin=>{\n          breakevenpoint+=coin.amount*coin.price_per_unit\n        })\n        let values = [today, Number(total[0]), Number(breakevenpoint)]\n        let oldValues = this.state.total\n        let newValues=oldValues.slice(0,1)\n        newValues.push(values)\n        this.setState({\n          total: newValues\n        })\n        API.updateTotal(newValues)\n      })\n    }else if(today===this.state.last_access){\n\n    }else{\n      let oldState = this.state.total\n      let newState\n      let timeDiff = Math.abs(new Date(this.changeDateFormatToUs(today)).getTime() - new Date(this.changeDateFormatToUs(this.state.last_access)).getTime());\n      let diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));\n      let breakevenpoint =0\n      this.state.coins.map(coin=>{\n        breakevenpoint+=coin.amount*coin.price_per_unit\n      })\n      API.getAllCoinsHistory(this.state,diffDays)\n      .then((total)=>{\n        let graphArray=[]\n        for (let i = 0; i < total.length; i+=this.state.coins.length){\n          let dailyTotal=0\n          let selectedDay\n          for (let j = 0; j < this.state.coins.length; j++){\n            let day = new Date(API.changeDateFormatToUS(this.state.last_access))\n            day.setDate(day.getDate() + (1+Math.floor(i/this.state.coins.length)))\n            selectedDay = API.changeDataFormatfromDateToEU(day)\n            dailyTotal+=total[i+j]\n\n          }\n          graphArray.push([selectedDay, Number(dailyTotal), Number(breakevenpoint)])\n        }\n        newState= oldState.concat(graphArray)\n\n        this.setState({\n          total: newState\n        })\n        API.updateTotal(newState,this.props.username)\n      })}\n    }\n\n    showTotal = ()=>{\n    API.getTotal2()\n    .then((total)=>{\n      this.setState({\n      total: total.total\n    },console.log(this.state.total))})\n    }\n\n\n  changeDateFormatToUs = (string) =>{\n    return `${string.slice(3,5)}/${string.slice(0,2)}/${string.slice(6)}`\n  }\n\n   changeDataFormatfromDateToEU=(date)=>{\n    return `${(\"0\" + date.getDate()).slice(-2)}-${(\"0\" + (date.getMonth() + 1)).slice(-2)}-${date.getFullYear()}`\n  }\n\n  stateCoin = () =>{\n  API.getCoins()\n  .then(resp=>this.setState({\n    coins: resp.coins,\n    last_access: resp.last_access,\n    total: resp.total,\n    created: resp.created\n  },()=>{\n    this.breakevenpoint()\n    this.getHistory()\n    }))}\n\n  stateNews = () =>{\n    API.handleNews()\n    .then(news=>{\n      this.setState({\n      news: news.articles\n      })\n    })\n  }\n\n  render(){\n    return(\n      <div className=\"PersonalPage\">\n        <div className=\"NavigationBar\">\n          <div className=\"ButtonArea buttons\">\n            <a onClick={()=>{this.props.signout()}} href=\"#\" className=\"btn btn-sm animated-button victoria-two nav_btn\">Sign Out</a>\n             <Link to='/edit' onClick={()=>{this.props.coins(this.state.coins)}} className=\"btn btn-sm animated-button victoria-two nav_btn\">Edit Coins</Link>\n             <Link className=\"btn btn-sm animated-button victoria-two nav_btn\" to='/'>Create Bot</Link>\n          </div>\n          <div className=\"LogoArea\">\n            <h1>Welcome {`${this.props.username}`}</h1>\n          </div>\n        </div>\n        <div className=\"ContentPersonalPage\">\n          <div className=\"LeftAreaContent\">\n            <div className=\"ChartBlock\">\n            <ReactVirtualizedTable graph={this.get30DaysDetail} showTotal={this.showTotal} total={this.state.total} state={this.state}/>\n\n            </div>\n            <div className=\"ChartBlock\">\n            <div className=\"Notes\">\n\n            </div>\n            </div>\n          </div>\n          <div className=\"RightAreaContent\">\n          <div className=\"ChartBlock Chart1-2\">\n\n          <div className=\"Chart1\">\n          <Graphs1 coins={this.state.coins}  prices={this.state.coins_current_values} state={this.state} total={this.state.total} />\n          </div>\n          <div className=\"Chart2\">\n          <Graphs2 coins={this.state.coins}  prices={this.state.coins_current_values} state={this.state} total={this.state.total} />\n          </div>\n          </div>\n          <div className=\"ChartBlock\">\n          <div className=\"Chart3\">\n          <Graphs3 coins={this.state.coins}  prices={this.state.coins_current_values} state={this.state} total={this.state.total} />\n          </div>\n          </div>\n\n          </div>\n        </div>\n        <div className=\"NewsArea grid-5 center\">\n        {this.state.news.slice(0,5).map(singlenews=><div > <MediaCard singlenews={singlenews}/></div>)}\n\n        </div>\n      </div>\n\n    )\n  }\n}\n\nexport default PersonalPage\n"]},"metadata":{},"sourceType":"module"}